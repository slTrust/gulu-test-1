### å‘å¸ƒnpmåŒ…

> #### 1.ç¡®ä¿ npm run test å…¨æ˜¯ç»¿è‰²(åŸè°…è‰²)æ‰è¡Œ

> #### 2.ä¸Šä¼ ä»£ç åˆ° npmjs.org

- æ›´æ–° package.json

```
åœ¨ package.json é‡Œå°†ç‰ˆæœ¬å·æ”¹ä¸º 0.0.1ï¼Œç­‰æˆ‘ä»¬åšå®Œäº†å†æ”¹æˆ 1.0.0
åˆ›å»º index.jsï¼Œåœ¨ index.js é‡Œå°†ä½ æƒ³è¦å¯¼å‡ºçš„å†…å®¹å…¨éƒ¨å¯¼å‡º


index.jsé‡Œ 

import Button from './src/button'
import ButtonGroup from './src/button-group'
import Icon from './src/icon'

export {Button,ButtonGroup,Icon}


ç„¶åå»package.jsoné‡Œ æ·»åŠ å…¥å£æ–‡ä»¶
"main": "index.js",
```

> #### 3. å» https://www.npmjs.com/ æ³¨å†Œä¸€ä¸ªè´¦æˆ·

> #### 4. åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ npm adduser

```
huangjiaxideMacBook-Pro:gulu-demo huangjiaxi$ npm adduser
Username: almost_00
Password: 
Email: (this IS public) trustfor@sina.cn

npm ERR! code E409
npm ERR! Registry returned 409 for PUT on https://registry.npm.taobao.org/-/user/org.couchdb.user:almost_00: conflict

npm ERR! A complete log of this run can be found in:
npm ERR!     /Users/huangjiaxi/.npm/_logs/2018-12-22T07_54_52_544Z-debug.log

```

- ä¸ºä»€ä¹ˆæŠ¥é”™å‘¢ï¼Ÿ

å› ä¸ºä¸ºäº†ä¸‹è½½çš„å¿«æ· ä¸‹è½½æºæ˜¯ æ·˜å®

å¦‚æœé”™è¯¯æç¤ºé‡Œé¢å«æœ‰ https://registry.npm.taobao.org åˆ™è¯´æ˜ä½ çš„ npm æºç›®å‰ä¸ºæ·˜å®æºï¼Œéœ€è¦æ›´æ¢ä¸º npm å®˜æ–¹æº

> ä¿®æ”¹é…ç½®

```
æŸ¥çœ‹é…ç½®
npm config list 

æ‰“å°å¦‚ä¸‹
; cli configs
metrics-registry = "https://registry.npm.taobao.org/"
scope = ""
user-agent = "npm/6.4.1 node/v10.14.2 darwin x64"

; userconfig /Users/huangjiaxi/.npmrc
registry = "https://registry.npm.taobao.org/"

; node bin location = /usr/local/bin/node
; cwd = /Users/huangjiaxi/Desktop/gulu-demo
; HOME = /Users/huangjiaxi
; "npm config ls -l" to show all defaults.

------------------------------------
è¿›å…¥è¿™ä¸ªç›®å½•
userconfig /Users/huangjiaxi/.npmrc
æ³¨é‡Šæ‰è¿™å¥è¯
registry = "https://registry.npm.taobao.org/"

æˆ‘çš„è·¯å¾„æ˜¯
vi /Users/huangjiaxi/.npmrc
vi /Users/huangjiaxi/.npmrc
vi /Users/huangjiaxi/.npmrc

```

> å†æ¬¡è¿›è¡Œ npm adduser

```
è¾“å…¥ä½ çš„è´¦å· å¯†ç  é‚®ç®±
å‡ºç° ä¸‹é¢ä»£è¡¨ä½ æˆåŠŸäº†
Logged in as ç”¨æˆ·å on https://registry.npmjs.org/.
```

> æ­¤æ—¶å»ºè®®ä¿®æ”¹ package.jsoné‡Œçš„ name 

- ä½ è¿˜ä¸æ˜¯å®Œæ•´çš„é¡¹ç›®
- è€Œä¸”ä½ ä¸æƒ³è®©åˆ«äººè§‰å¾—ä½ low
- èµ·åèµ·ä¸ªä¸é‡è¦çš„ å¦‚ gulu-test-0-1
- ä¸è¦å¿˜äº†æäº¤ä»£ç ç„¶åpush æœ€ååœ¨å‘å¸ƒ npm publish

> å‘å¸ƒ npm publish

- å¦‚æœè¿˜å¤±è´¥ä¼šåé¦ˆä¸€äº›ä¿¡æ¯å¯èƒ½æ˜¯ä½ èµ·çš„åå­—åƒä¸ªåƒåœ¾ï¼Œé‡æ–°æ”¹ä¸ªç¨å¾®æ­£å¸¸çš„åå­—å°±å¯ä»¥

```
npm notice 
npm notice ğŸ“¦  gulu-test-0-1@0.0.1
npm notice === Tarball Contents === 
npm notice 1.2kB  package.json                        
npm notice 219B   .travis.yml                         
npm notice 1.4kB  index.html                          
npm notice 142B   index.js                            
npm notice 1.9kB  karma.conf.js                       
npm notice 1.1kB  LICENSE                             
npm notice 149B   README.md                           
npm notice 1.2kB  documents/000æµ‹è¯•åˆæ­¥.md            
npm notice 11.2kB documents/001æŒç»­é›†æˆ.md            
npm notice 9.4kB  documents/002æµ‹è¯•ç”¨ä¾‹å‰–æ.md        
npm notice 2.2kB  documents/003æŒç»­é›†æˆä¹‹è‡ªåŠ¨åŒ–æµ‹è¯•.md
npm notice 2.4kB  documents/004å‘å¸ƒnpmåŒ…              
npm notice 4.6kB  src/app.js                          
npm notice 1.6kB  src/button-group.vue                
npm notice 1.8kB  src/button.vue                      
npm notice 249B   src/icon.vue                        
npm notice 2.5kB  test/button.test.js                 
npm notice === Tarball Details === 
npm notice name:          gulu-test-0-1                           
npm notice version:       0.0.1                                   
npm notice package size:  12.7 kB                                 
npm notice unpacked size: 43.2 kB                                 
npm notice shasum:        51b1f601c27fb721286d2d050eaf6ffe1c769f42
npm notice integrity:     sha512-LYslf1Ks1XGw3[...]YlFEyDNX6iIaA==
npm notice total files:   17                                      
npm notice 
+ gulu-test-0-1@0.0.1
```


#### ä½¿ç”¨è‡ªå·±çš„åŒ…

> é¢„æµ‹å…¶ä»–ä½¿ç”¨ä½ çš„åŒ…çš„äººä¼šæ€ä¹ˆä½¿ç”¨

- ä½¿ç”¨ vue-cli
- ä½¿ç”¨ webpack
- ä½¿ç”¨ parcel

> åˆ†åˆ«ä½¿ç”¨è¿™äº›æ–¹å¼æ¥ä½¿ç”¨è‡ªå·±çš„åŒ…ï¼ˆæˆ‘ä»¬åªä»¥ vue-cli ä¸ºä¾‹ï¼‰æˆ‘ç”¨çš„æ˜¯vue-cli3

```
// æ³¨æ„æ­¤æ—¶è¦åˆ‡æ¢å‘½ä»¤è¡Œçš„ç›®å½• æˆ‘ç”¨çš„æ¡Œé¢
cd ~/Desktop 
vue create hello-world
ç›´æ¥ä¸€è·¯å›è½¦
æŒ‰ç…§æç¤ºè¿è¡Œ
cd hello-world
yarn serve

å¦‚æœé¡ºåˆ© ä½ å°±å¯ä»¥å»æµè§ˆå™¨çœ‹åˆ°ä¸€ä¸ªç©ºæ¶å­çš„ vueé¡¹ç›®

å®‰è£…æˆ‘ä»¬çš„ npmåŒ…
æ³¨æ„ç›®å½• é˜²æ­¢ä½ æ‰‹è´±
æ³¨æ„ç›®å½• é˜²æ­¢ä½ æ‰‹è´±
æ³¨æ„ç›®å½• é˜²æ­¢ä½ æ‰‹è´±
cd ~/Desktop/hello-world
npm i gulu-test-0-1
ä¸‹è½½çš„å¾ˆæ…¢ 
    1å› ä¸ºæ·˜å®æºæ²¡æ¢å›æ¥

ç»†èŠ‚æ³¨æ„ å¦‚æœä¸€è·¯å›è½¦å¼€å¯çš„ vue-clié¡¹ç›®ç”¨çš„æ˜¯yarn
ä½ è¿™é‡Œç”¨çš„æ˜¯ npm åƒä¸‡åƒä¸‡ä¸è¦ npmå’Œ yarn æ··ç€ç”¨

yarn add  gulu-test-0-1

```

> åœ¨ hello-world é¡¹ç›®é‡Œå¼•å…¥æˆ‘ä»¬çš„ è½®å­

```
// main.js
import {Button,ButtonGroup,Icon} from 'gulu-test-0-1'

console.log(Button);


-------------------------------
é‡æ–°è¿è¡Œ yarn serve

ç»“æœæŠ¥é”™äº†
Failed to compile with 3 errors                                                                   16:28:10

Failed to resolve loader: sass-loader
You may need to install it. 
```

> å¤±è´¥çš„åŸå› 

nodeç›®å‰ä¸æ”¯æŒ import 

```
import Button from './src/button'
import ButtonGroup from './src/button-group'
import Icon from './src/icon'

export {Button,ButtonGroup,Icon}
```


> #### ä½¿ç”¨è¿‡ç¨‹ä¸­æˆ‘ä»¬å‘ç°æŠ¥é”™è¯´ import è¯­æ³•æœ‰é—®é¢˜ï¼Œé‚£æ—¶å› ä¸º node ç›®å‰ç¡®å®ä¸æ”¯æŒ importï¼Œæˆ‘ä»¬éœ€è¦ç”¨ babel è½¬è¯‘ import

- ä½ å¯ä»¥è¦æ±‚ä½¿ç”¨è€…è‡ªå·±ç”¨ babel æ¥è½¬è¯‘(å†™è½®å­çš„å¤§å¿Œ)
- ä½ ä¹Ÿå¯ä»¥è½¬ä¹‰å¥½äº†å†ç»™ä»–ç”¨

å›åˆ° gulu-demo é‡Œ

```
npx parcel build index.js --no-minify

# å¾—åˆ°ä¸‰ä¸ªæ–‡ä»¶
dist/index.js     8.42 KB    1.92s
dist/index.css    2.09 KB    1.73s
dist/index.map        0 B      2ms

ä¿®æ”¹ package.jsoné‡Œ çš„ mainè·¯å¾„
dist/index.js
```

> ##### ä½†æ˜¯æ­¤æ—¶æœ‰ä¸ªé—®é¢˜ é‚£å°±æ˜¯.gitignore æ–‡ä»¶é‡Œä½ å¿½ç•¥é‡Œdistç›®å½•

```
æˆ‘ä»¬å…ˆä¸å¤„ç† å…ˆæäº¤ä»£ç  ç„¶åå‘å¸ƒ npmè¯•ä¸€ä¸‹
æ­¤æ—¶å‘å¸ƒä¼šæŠ¥é”™  æ„æ€å°±æ˜¯ä¸å…è®¸å‘åŒä¸€ä¸ªç‰ˆæœ¬çš„æ–‡ä»¶
ä¿®æ”¹ package.jsoné‡Œçš„
"version": "0.0.2",
ç„¶å æäº¤ä»£ç  ç„¶åå‘å¸ƒ
```

```
npx parcel build index.js --no-minify ï¼ˆæœ¬æ¥ä¸åº”è¯¥åŠ  --no-minify çš„ï¼Œå¥ˆä½•ä¸åŠ ä¼šæœ‰ bugï¼ŒHTML å‹ç¼©æŠŠ slot æ ‡ç­¾å…¨åˆ äº†ï¼‰
å°† package.json çš„ main æ”¹ä¸º dist/index.js
```

> ä½¿ç”¨ npm link æˆ–è€… yarn link æ¥åŠ é€Ÿè°ƒè¯•

ä½ æ¯æ¬¡ä¿®æ”¹æºç ä¹‹åï¼Œæœ‰ä¸¤æ¡è·¯è®©åˆ«äººå¾—åˆ°æœ€æ–°æ•ˆæœ

- æ›´æ–° package.json é‡Œçš„ versionï¼Œç„¶å npm publishã€‚åˆ«äººé€šè¿‡ npm update xxx æ¥æ›´æ–°ã€‚
- å¦‚æœä½ åªæ˜¯ä¸ºäº†æœ¬åœ°è°ƒè¯•ï¼Œå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä½¿ç”¨ npm linkï¼Œç„¶ååœ¨ä½¿ç”¨ä¹‹å¤„è¿è¡Œ npm link xxxï¼Œå°±æ˜¯æœ€æ–°äº†

